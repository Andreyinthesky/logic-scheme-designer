{"version":3,"file":"bundling.js","sources":["webpack://[name]/bundling.js"],"sourcesContent":["!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define([],e):\"object\"==typeof exports?exports.Bundling=e():t.Bundling=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,\"a\",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p=\"\",n(n.s=57)}([function(t,e){t.exports=function(t){return t&&t.__esModule?t:{default:t}}},,function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}},,function(t,e,n){var r=n(23),o=n(6),u=5;function i(t,e,n,c){for(var f in n=n||0,c=c||u,e)if(e.hasOwnProperty(f)){var a=e[f];null!==a&&r(a)?(r(t[f])||(t[f]={}),n<c?i(t[f],a,n+1,c):t[f]=e[f]):o(a)?(t[f]=[],t[f]=t[f].concat(a)):void 0!==a&&(t[f]=a)}}t.exports=function(){for(var t=new Array(arguments.length),e=t.length,n=0;n<e;n++)t[n]=arguments[n];for(var r=t[0],o=1;o<e;o++)i(r,t[o]);return r}},function(t,e,n){var r=n(7),o=Array.isArray?Array.isArray:function(t){return r(t,\"Array\")};t.exports=o},function(t,e){var n={}.toString;t.exports=function(t,e){return n.call(t)===\"[object \"+e+\"]\"}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},,function(t,e,n){var r=n(18),o=n(25);t.exports=function(t,e){return!e||\"object\"!==r(e)&&\"function\"!=typeof e?o(t):e}},function(t,e,n){var r=n(26);t.exports=function(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},,,function(t,e,n){var r=n(20),o=n(6);t.exports=function(t,e){if(t)if(o(t))for(var n=0,u=t.length;n<u&&!1!==e(t[n],n);n++);else if(r(t))for(var i in t)if(t.hasOwnProperty(i)&&!1===e(t[i],i))break}},function(t,e,n){\"use strict\";var r=n(0),o=r(n(3)),u=r(n(2)),i=n(5),c=n(14),f=n(27),a=function(){function t(e){(0,o.default)(this,t),this._cfgs=i(this.getDefaultCfgs(),e)}return(0,u.default)(t,[{key:\"getDefaultCfgs\",value:function(){return{}}},{key:\"initPlugin\",value:function(t){var e=this;e.set(\"graph\",t);var n=e.getEvents(),r={};c(n,function(n,o){var u=f(e,n);r[o]=u,t.on(o,u)}),this._events=r,this.init()}},{key:\"init\",value:function(){}},{key:\"getEvents\",value:function(){return{}}},{key:\"get\",value:function(t){return this._cfgs[t]}},{key:\"set\",value:function(t,e){this._cfgs[t]=e}},{key:\"destroy\",value:function(){}},{key:\"destroyPlugin\",value:function(){this.destroy();var t=this.get(\"graph\"),e=this._events;c(e,function(e,n){t.off(n,e)}),this._events=null,this._cfgs=null,this.destroyed=!0}}]),t}();t.exports=a},,,function(t,e){function n(e){\"@babel/helpers - typeof\";return\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t},n(e)}t.exports=n},,function(t,e){function n(t){\"@babel/helpers - typeof\";return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}var r=\"function\"==typeof Symbol&&\"symbol\"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":n(t)};t.exports=function(t){var e=void 0===t?\"undefined\":r(t);return null!==t&&\"object\"===e||\"function\"===e}},,function(t,e){function n(t){\"@babel/helpers - typeof\";return(n=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}var r=\"function\"==typeof Symbol&&\"symbol\"===n(Symbol.iterator)?function(t){return n(t)}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":n(t)};t.exports=function(t){return\"object\"===(void 0===t?\"undefined\":r(t))&&null!==t}},function(t,e,n){var r=n(22),o=n(7);t.exports=function(t){if(!r(t)||!o(t,\"Object\"))return!1;if(null===Object.getPrototypeOf(t))return!0;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}},,function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){t.exports=function(t,e){if(t[\"_wrap_\"+e])return t[\"_wrap_\"+e];var n=function(n){t[e](n)};return t[\"_wrap_\"+e]=n,n}},,,,,,,,,,,,,function(t,e,n){var r=n(43);function o(e,n,u){return\"undefined\"!=typeof Reflect&&Reflect.get?t.exports=o=Reflect.get:t.exports=o=function(t,e,n){var o=r(t,e);if(o){var u=Object.getOwnPropertyDescriptor(o,e);return u.get?u.get.call(n):u.value}},o(e,n,u||e)}t.exports=o},,,function(t,e,n){var r=n(8);t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=r(t)););return t}},,,,,,,,,,,,,,function(t,e,n){\"use strict\";var r=n(0),o=r(n(3)),u=r(n(2)),i=r(n(40)),c=r(n(11)),f=r(n(10)),a=r(n(8));function s(t){var e=function(){if(\"undefined\"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,r=(0,a.default)(t);if(e){var o=(0,a.default)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return(0,f.default)(this,n)}}function y(t,e,n){var r=t.x-e.x,o=t.y-e.y;return!n||Math.abs(r)>n||Math.abs(o)>n?Math.sqrt(r*r+o*o):n}function l(t,e){var n=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(n*n*e.source.x+n*(t.y-e.source.y)+t.x)/(n*n+1);return{x:r,y:n*(r-e.source.x)+e.source.y}}var g=function(t){(0,c.default)(n,t);var e=s(n);function n(){return(0,o.default)(this,n),e.apply(this,arguments)}return(0,u.default)(n,[{key:\"getDefaultCfgs\",value:function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}}},{key:\"init\",value:function(){var t=this.get(\"graph\"),e=this.get(\"onTick\");this.set(\"tick\",function(){e&&e(),t.refreshPositions()})}},{key:\"bundling\",value:function(t){var e=this;if(e.set(\"data\",t),!e.isTicking()){var n=t.edges,r=t.nodes,o=new Map,u=!1;if(r.forEach(function(t){null!==t.x&&null!==!t.y&&void 0!==t.x&&void 0!==!t.y||(u=!0),o.set(t.id,t)}),u)throw new Error(\"please layout the graph or assign x and y for nodes first\");e.set(\"nodeIdMap\",o);var i=e.get(\"divisions\"),c=e.get(\"divRate\"),f=e.divideEdges(i);e.set(\"edgePoints\",f);var a=e.getEdgeBundles();e.set(\"edgeBundles\",a);for(var s=e.get(\"cycles\"),y=e.get(\"iterations\"),l=e.get(\"iterRate\"),g=e.get(\"lambda\"),p=0;p<s;p++){for(var v=function(t){var r=[];n.forEach(function(t,n){if(t.source!==t.target){var u=o.get(t.source),c=o.get(t.target);r[n]=e.getEdgeForces({source:u,target:c},n,i,g);for(var a=0;a<i+1;a++)f[n][a].x+=r[n][a].x,f[n][a].y+=r[n][a].y}})},d=0;d<y;d++)v();g/=2,i*=c,y*=l,f=e.divideEdges(i),e.set(\"edgePoints\",f)}n.forEach(function(t,e){t.source!==t.target&&(t.shape=\"polyline\",t.controlPoints=f[e].slice(1,f[e].length-1))}),e.get(\"graph\").refresh()}}},{key:\"updateBundling\",value:function(t){var e=this,n=t.data;n&&e.set(\"data\",n),e.get(\"ticking\")&&e.set(\"ticking\",!1),Object.keys(t).forEach(function(n){e.set(n,t[n])}),t.onTick&&e.set(\"tick\",function(){t.onTick(),e.graph.refresh()}),e.bundling(n)}},{key:\"divideEdges\",value:function(t){var e=this,n=e.get(\"data\").edges,r=e.get(\"nodeIdMap\"),o=e.get(\"edgePoints\");return o&&void 0!==o||(o=[]),n.forEach(function(n,u){o[u]&&void 0!==o[u]||(o[u]=[]);var i=r.get(n.source),c=r.get(n.target);if(1===t)o[u].push({x:i.x,y:i.y}),o[u].push({x:.5*(i.x+c.x),y:.5*(i.y+c.y)}),o[u].push({x:c.x,y:c.y});else{var f=(o[u]&&o[u]!==[]?e.getEdgeLength(o[u]):y(i,c))/(t+1),a=f,s=[{x:i.x,y:i.y}];o[u].forEach(function(t,e){if(0!==e){for(var n=y(t,o[u][e-1]);n>a;){var r=a/n,i={x:o[u][e-1].x,y:o[u][e-1].y};i.x+=r*(t.x-o[u][e-1].x),i.y+=r*(t.y-o[u][e-1].y),s.push(i),n-=a,a=f}a-=n}}),s.push({x:c.x,y:c.y}),o[u]=s}}),o}},{key:\"getEdgeLength\",value:function(t){var e=0;return t.forEach(function(n,r){0!==r&&(e+=y(n,t[r-1]))}),e}},{key:\"getEdgeBundles\",value:function(){var t=this,e=t.get(\"data\").edges,n=t.get(\"bundleThreshold\"),r=t.get(\"nodeIdMap\"),o=t.get(\"edgeBundles\");return o||(o=[]),e.forEach(function(t,e){o[e]&&void 0!==o[e]||(o[e]=[])}),e.forEach(function(u,i){var c=r.get(u.source),f=r.get(u.target);e.forEach(function(e,u){if(!(u<=i)){var a=r.get(e.source),s=r.get(e.target);t.getBundleScore({source:c,target:f},{source:a,target:s})>=n&&(o[i].push(u),o[u].push(i))}})}),o}},{key:\"getBundleScore\",value:function(t,e){return t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,e.vx=e.target.x-e.source.x,e.vy=e.target.y-e.source.y,t.length=y({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),e.length=y({x:e.source.x,y:e.source.y},{x:e.target.x,y:e.target.y}),this.getAngleScore(t,e)*this.getScaleScore(t,e)*this.getPosisionScore(t,e)*this.getVisibilityScore(t,e)}},{key:\"getAngleScore\",value:function(t,e){return function(t,e){return t.x*e.x+t.y*e.y}({x:t.vx,y:t.vy},{x:e.vx,y:e.vy})/(t.length*e.length)}},{key:\"getScaleScore\",value:function(t,e){var n=(t.length+e.length)/2;return 2/(n/Math.min(t.length,e.length)+Math.max(t.length,e.length)/n)}},{key:\"getPosisionScore\",value:function(t,e){var n=(t.length+e.length)/2;return n/(n+y({x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},{x:(e.source.x+e.target.x)/2,y:(e.source.y+e.target.y)/2}))}},{key:\"getVisibilityScore\",value:function(t,e){var n=this.getEdgeVisibility(t,e),r=this.getEdgeVisibility(e,t);return n<r?n:r}},{key:\"getEdgeVisibility\",value:function(t,e){var n=l(e.source,t),r=l(e.target,t),o={x:(n.x+r.x)/2,y:(n.y+r.y)/2},u={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*y(o,u)/y(n,r))}},{key:\"getEdgeForces\",value:function(t,e,n,r){for(var o=this.get(\"edgePoints\"),u=this.get(\"K\")/(y(t.source,t.target)*(n+1)),i=[{x:0,y:0}],c=1;c<n;c++){var f={x:0,y:0},a=this.getSpringForce({pre:o[e][c-1],cur:o[e][c],next:o[e][c+1]},u),s=this.getElectrostaticForce(c,e);f.x=r*(a.x+s.x),f.y=r*(a.y+s.y),i.push(f)}return i.push({x:0,y:0}),i}},{key:\"getSpringForce\",value:function(t,e){var n=t.pre.x+t.next.x-2*t.cur.x,r=t.pre.y+t.next.y-2*t.cur.y;return{x:n*=e,y:r*=e}}},{key:\"getElectrostaticForce\",value:function(t,e){var n=this.get(\"eps\"),r=this.get(\"edgeBundles\"),o=this.get(\"edgePoints\"),u={x:0,y:0};return r[e].forEach(function(r){var i={x:o[r][t].x-o[e][t].x,y:o[r][t].y-o[e][t].y};if(Math.abs(i.x)>n||Math.abs(i.y)>n){var c=1/y(o[r][t],o[e][t]);u.x+=i.x*c,u.y+=i.y*c}}),u}},{key:\"isTicking\",value:function(){return this.get(\"ticking\")}},{key:\"getSimulation\",value:function(){return this.get(\"forceSimulation\")}},{key:\"destroy\",value:function(){this.get(\"ticking\")&&this.getSimulation().stop(),(0,i.default)((0,a.default)(n.prototype),\"destroy\",this).call(this)}}]),n}(n(15));t.exports=g}])});"],"mappings":"AAAA","sourceRoot":""}